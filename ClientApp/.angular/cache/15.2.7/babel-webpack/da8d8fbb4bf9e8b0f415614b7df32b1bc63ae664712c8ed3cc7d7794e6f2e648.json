{"ast":null,"code":"import { catchError, map } from 'rxjs/operators';\nimport { environment } from '../../environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class DraggableElementService {\n  constructor(http) {\n    this.http = http;\n    this.apiUrl = environment.baseApiUrl;\n    this.elements = [];\n  }\n  saveCoordinates(coordinates) {\n    return this.http.post(`${this.apiUrl}/api/SaveCoordinate`, coordinates).pipe(map(response => {\n      console.log('Coordinate salvate:', coordinates);\n      return response;\n    }), catchError(error => {\n      console.error('Errore durante il salvataggio delle coordinate:', error);\n      throw error;\n    }));\n  }\n  getCoordinatesByName(elementName) {\n    return this.http.get(`${this.apiUrl}/api/GetCoordinate?elementName=${elementName}`).pipe(map(response => {\n      const element = response;\n      if (element) {\n        const name = element.name;\n        const elementTop = element.y;\n        const elementLeft = element.x;\n        console.log('Coordinate salvate:', name, 'top y' + elementTop, 'left x' + elementLeft);\n        const elementToPosition = document.getElementById(name);\n        if (elementToPosition) {\n          elementToPosition.style.top = `${elementTop}px`;\n          elementToPosition.style.left = `${elementLeft}px`;\n        }\n      }\n      return element;\n    }), catchError(error => {\n      console.error('Errore durante il recupero delle coordinate:', error);\n      throw error;\n    }));\n  }\n  getElements() {\n    return this.http.get(`${this.apiUrl}/api/GetElements`).pipe(map(response => {\n      return this.elements;\n    }), catchError(error => {\n      console.error('Errore durante il recupero degli elementi:', error);\n      throw error;\n    }));\n  }\n}\nDraggableElementService.ɵfac = function DraggableElementService_Factory(t) {\n  return new (t || DraggableElementService)(i0.ɵɵinject(i1.HttpClient));\n};\nDraggableElementService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: DraggableElementService,\n  factory: DraggableElementService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":"AAGA,SAASA,UAAU,EAAEC,GAAG,QAAQ,gBAAgB;AAGhD,SAASC,WAAW,QAAQ,gCAAgC;;;AAK5D,OAAM,MAAOC,uBAAuB;EAKlCC,YAAoBC,IAAgB;IAAhB,SAAI,GAAJA,IAAI;IAHhB,WAAM,GAAGH,WAAW,CAACI,UAAU;IAC/B,aAAQ,GAAe,EAAE;EAEO;EAExCC,eAAe,CAACC,WAAgB;IAC9B,OAAO,IAAI,CAACH,IAAI,CAACI,IAAI,CAAC,GAAG,IAAI,CAACC,MAAM,qBAAqB,EAAEF,WAAW,CAAC,CACpEG,IAAI,CACHV,GAAG,CAACW,QAAQ,IAAG;MACbC,OAAO,CAACC,GAAG,CAAC,qBAAqB,EAAEN,WAAW,CAAC;MAC/C,OAAOI,QAAQ;IACjB,CAAC,CAAC,EACFZ,UAAU,CAACe,KAAK,IAAG;MACjBF,OAAO,CAACE,KAAK,CAAC,iDAAiD,EAAEA,KAAK,CAAC;MACvE,MAAMA,KAAK;IACb,CAAC,CAAC,CACH;EACL;EAEAC,oBAAoB,CAACC,WAAmB;IACtC,OAAO,IAAI,CAACZ,IAAI,CAACa,GAAG,CAAmB,GAAG,IAAI,CAACR,MAAM,kCAAkCO,WAAW,EAAE,CAAC,CAClGN,IAAI,CACHV,GAAG,CAAEW,QAA0B,IAAI;MACjC,MAAMO,OAAO,GAAqBP,QAAQ;MAE1C,IAAIO,OAAO,EAAE;QACX,MAAMC,IAAI,GAAGD,OAAO,CAACC,IAAI;QACzB,MAAMC,UAAU,GAAGF,OAAO,CAACG,CAAC;QAC5B,MAAMC,WAAW,GAAGJ,OAAO,CAACK,CAAC;QAE7BX,OAAO,CAACC,GAAG,CAAC,qBAAqB,EAAEM,IAAI,EAAE,OAAO,GAAGC,UAAU,EAAE,QAAQ,GAAGE,WAAW,CAAC;QAEtF,MAAME,iBAAiB,GAAGC,QAAQ,CAACC,cAAc,CAACP,IAAI,CAAgB;QAEtE,IAAIK,iBAAiB,EAAE;UACrBA,iBAAiB,CAACG,KAAK,CAACC,GAAG,GAAG,GAAGR,UAAU,IAAI;UAC/CI,iBAAiB,CAACG,KAAK,CAACE,IAAI,GAAG,GAAGP,WAAW,IAAI;;;MAIrD,OAAOJ,OAAO;IAChB,CAAC,CAAC,EACFnB,UAAU,CAACe,KAAK,IAAG;MACjBF,OAAO,CAACE,KAAK,CAAC,8CAA8C,EAAEA,KAAK,CAAC;MACpE,MAAMA,KAAK;IACb,CAAC,CAAC,CACH;EACL;EAEAgB,WAAW;IACT,OAAO,IAAI,CAAC1B,IAAI,CAACa,GAAG,CAAa,GAAG,IAAI,CAACR,MAAM,kBAAkB,CAAC,CAC/DC,IAAI,CACHV,GAAG,CAAEW,QAAoB,IAAI;MAC3B,OAAO,IAAI,CAACoB,QAAQ;IACtB,CAAC,CAAC,EACFhC,UAAU,CAACe,KAAK,IAAG;MACjBF,OAAO,CAACE,KAAK,CAAC,4CAA4C,EAAEA,KAAK,CAAC;MAClE,MAAMA,KAAK;IACb,CAAC,CAAC,CACH;EACL;;AA9DWZ,uBAAuB;mBAAvBA,uBAAuB;AAAA;AAAvBA,uBAAuB;SAAvBA,uBAAuB;EAAA8B,SAAvB9B,uBAAuB;EAAA+B,YAFtB;AAAM","names":["catchError","map","environment","DraggableElementService","constructor","http","baseApiUrl","saveCoordinates","coordinates","post","apiUrl","pipe","response","console","log","error","getCoordinatesByName","elementName","get","element","name","elementTop","y","elementLeft","x","elementToPosition","document","getElementById","style","top","left","getElements","elements","factory","providedIn"],"sourceRoot":"","sources":["C:\\src\\dotnet\\DashboardApp\\ClientApp\\src\\app\\services\\draggable-element.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport { catchError, map } from 'rxjs/operators';\r\nimport { Elements } from '../models/elements.model';\r\nimport { DraggableElement } from '../models/draggable-element.model';\r\nimport { environment } from '../../environments/environment';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class DraggableElementService {\r\n\r\n  private apiUrl = environment.baseApiUrl;\r\n  private elements: Elements[] = [];\r\n\r\n  constructor(private http: HttpClient) { }\r\n\r\n  saveCoordinates(coordinates: any): Observable<any> {\r\n    return this.http.post(`${this.apiUrl}/api/SaveCoordinate`, coordinates)\r\n      .pipe(\r\n        map(response => {\r\n          console.log('Coordinate salvate:', coordinates);\r\n          return response;\r\n        }),\r\n        catchError(error => {\r\n          console.error('Errore durante il salvataggio delle coordinate:', error);\r\n          throw error;\r\n        })\r\n      );\r\n  }\r\n\r\n  getCoordinatesByName(elementName: string): Observable<DraggableElement> {\r\n    return this.http.get<DraggableElement>(`${this.apiUrl}/api/GetCoordinate?elementName=${elementName}`)\r\n      .pipe(\r\n        map((response: DraggableElement) => {\r\n          const element: DraggableElement = response;\r\n\r\n          if (element) {\r\n            const name = element.name;\r\n            const elementTop = element.y;\r\n            const elementLeft = element.x;\r\n\r\n            console.log('Coordinate salvate:', name, 'top y' + elementTop, 'left x' + elementLeft);\r\n\r\n            const elementToPosition = document.getElementById(name) as HTMLElement;\r\n\r\n            if (elementToPosition) {\r\n              elementToPosition.style.top = `${elementTop}px`;\r\n              elementToPosition.style.left = `${elementLeft}px`;\r\n            }\r\n          }\r\n\r\n          return element;\r\n        }),\r\n        catchError(error => {\r\n          console.error('Errore durante il recupero delle coordinate:', error);\r\n          throw error;\r\n        })\r\n      );\r\n  }\r\n\r\n  getElements(): Observable<Elements[]> {\r\n    return this.http.get<Elements[]>(`${this.apiUrl}/api/GetElements`)\r\n      .pipe(\r\n        map((response: Elements[]) => {\r\n          return this.elements;\r\n        }),\r\n        catchError(error => {\r\n          console.error('Errore durante il recupero degli elementi:', error);\r\n          throw error;\r\n        })\r\n      );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}