{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class DraggableElementComponent {\n  constructor(http) {\n    this.http = http;\n    this.isDragging = false;\n    this.draggedElement = null;\n    this.apiUrl = 'https://localhost:7164';\n  }\n  ngOnInit() {\n    this.getCoordinatesByName('element1');\n    this.getCoordinatesByName('element2');\n    this.getCoordinatesByName('element3');\n  }\n  onDrag(event) {\n    if (this.isDragging && this.draggedElement) {\n      this.draggedElement.style.top = event.clientX + 'px';\n      this.draggedElement.style.left = event.clientY + 'px';\n    }\n  }\n  onDragEnd(event) {\n    if (this.isDragging && this.draggedElement) {\n      this.isDragging = false;\n      // Ottieni le coordinate dell'elemento trascinato come stringhe\n      const topValue = this.draggedElement.style.top;\n      const leftValue = this.draggedElement.style.left;\n      // Rimuovi \"px\" dai valori e converti in numeri\n      const topNumeric = parseInt(topValue, 10);\n      const leftNumeric = parseInt(leftValue, 10);\n      const coordinates = {\n        name: this.draggedElement.id,\n        x: topNumeric,\n        y: leftNumeric\n      };\n      // Invia le coordinate al backend tramite una chiamata API\n      this.saveCoordinates(coordinates);\n      this.draggedElement = null;\n    }\n  }\n  onDragStart(event) {\n    this.isDragging = true;\n    this.draggedElement = event.target;\n  }\n  saveCoordinates(coordinates) {\n    this.http.post(`${this.apiUrl}/api/SaveCoordinate`, coordinates).subscribe(response => {\n      console.log('Coordinate salvate:', coordinates);\n    }, error => {\n      console.error('Errore durante il salvataggio delle coordinate:', error);\n      // Puoi gestire l'errore qui, ad esempio, mostrare un messaggio all'utente o effettuare altre azioni\n    });\n  }\n\n  getCoordinatesByName(elementName) {\n    this.http.get(`${this.apiUrl}/api/GetCoordinate?elementName=${elementName}`).subscribe(response => {\n      const element = response;\n      if (element) {\n        const name = element.name;\n        const elementTop = element.y;\n        const elementLeft = element.x;\n        console.log('Coordinate salvate:', name, 'top y' + elementTop, 'left x' + elementLeft);\n        const elementToPosition = document.getElementById(name);\n        if (elementToPosition) {\n          elementToPosition.style.top = `${elementTop}px`;\n          elementToPosition.style.left = `${elementLeft}px`;\n        }\n      }\n    });\n  }\n}\nDraggableElementComponent.ɵfac = function DraggableElementComponent_Factory(t) {\n  return new (t || DraggableElementComponent)(i0.ɵɵdirectiveInject(i1.HttpClient));\n};\nDraggableElementComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: DraggableElementComponent,\n  selectors: [[\"app-draggable-element\"]],\n  hostBindings: function DraggableElementComponent_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵlistener(\"mousemove\", function DraggableElementComponent_mousemove_HostBindingHandler($event) {\n        return ctx.onDrag($event);\n      }, false, i0.ɵɵresolveDocument)(\"mouseup\", function DraggableElementComponent_mouseup_HostBindingHandler($event) {\n        return ctx.onDragEnd($event);\n      }, false, i0.ɵɵresolveDocument);\n    }\n  },\n  decls: 10,\n  vars: 0,\n  consts: [[1, \"draggable-container\"], [\"id\", \"element1\", 1, \"draggable\", 3, \"mousedown\", \"mouseup\"], [\"draggableElement\", \"\"], [\"id\", \"element2\", 1, \"draggable\", 3, \"mousedown\", \"mouseup\"], [\"id\", \"element3\", 1, \"draggable\", 3, \"mousedown\", \"mouseup\"]],\n  template: function DraggableElementComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1, 2);\n      i0.ɵɵlistener(\"mousedown\", function DraggableElementComponent_Template_div_mousedown_1_listener($event) {\n        return ctx.onDragStart($event);\n      })(\"mouseup\", function DraggableElementComponent_Template_div_mouseup_1_listener($event) {\n        return ctx.onDragEnd($event);\n      });\n      i0.ɵɵtext(3, \"Elemento 1\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"div\", 3, 2);\n      i0.ɵɵlistener(\"mousedown\", function DraggableElementComponent_Template_div_mousedown_4_listener($event) {\n        return ctx.onDragStart($event);\n      })(\"mouseup\", function DraggableElementComponent_Template_div_mouseup_4_listener($event) {\n        return ctx.onDragEnd($event);\n      });\n      i0.ɵɵtext(6, \"Elemento 2\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"div\", 4, 2);\n      i0.ɵɵlistener(\"mousedown\", function DraggableElementComponent_Template_div_mousedown_7_listener($event) {\n        return ctx.onDragStart($event);\n      })(\"mouseup\", function DraggableElementComponent_Template_div_mouseup_7_listener($event) {\n        return ctx.onDragEnd($event);\n      });\n      i0.ɵɵtext(9, \"Elemento 3\");\n      i0.ɵɵelementEnd()();\n    }\n  },\n  styles: [\".draggable-element[_ngcontent-%COMP%] {\\r\\n  width: 100px;\\r\\n  height: 100px;\\r\\n  background-color: gray;\\r\\n  color: white;\\r\\n  position: absolute;\\r\\n  -webkit-user-select: none;\\r\\n          user-select: none;\\r\\n  cursor: grab;\\r\\n  transition: transform 0.3s ease;\\r\\n}\\r\\n\\r\\n.draggable-container[_ngcontent-%COMP%] {\\r\\n  position: relative;\\r\\n}\\r\\n\\r\\n.draggable[_ngcontent-%COMP%] {\\r\\n  position: absolute;\\r\\n  background-color: #3498db;\\r\\n  color: #ffffff;\\r\\n  padding: 10px;\\r\\n  cursor: pointer;\\r\\n\\r\\n  position: absolute;\\r\\n  cursor: grab;\\r\\n  width: 50%;\\r\\n  background-color: #ffffff;\\r\\n  padding: 20px;\\r\\n  border: 2px solid #3498db;\\r\\n  border-radius: 10px;\\r\\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);\\r\\n  display: flex;\\r\\n  flex-direction: column;\\r\\n}\\r\\n\\r\\n.dragging[_ngcontent-%COMP%] {\\r\\n  cursor: grabbing;\\r\\n}\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n#draggable[_ngcontent-%COMP%] {\\r\\n  position: absolute;\\r\\n  cursor: grab;\\r\\n  width: 50%;\\r\\n  background-color: #ffffff;\\r\\n  padding: 20px;\\r\\n  border: 2px solid #3498db;\\r\\n  border-radius: 10px;\\r\\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);\\r\\n  display: flex;\\r\\n  flex-direction: column;\\r\\n}\\r\\n\\r\\n  #draggable[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%] {\\r\\n    align-self: flex-end;\\r\\n    font-size: 24px;\\r\\n    color: #3498db;\\r\\n    cursor: pointer;\\r\\n    margin-bottom: -20px;\\r\\n  }\\r\\n\\r\\n  #draggable[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] {\\r\\n    text-align: center;\\r\\n    font-size: 24px;\\r\\n    color: #3498db;\\r\\n    margin-bottom: 20px;\\r\\n  }\\r\\n\\r\\n.form-group[_ngcontent-%COMP%] {\\r\\n  margin-bottom: 20px;\\r\\n}\\r\\n\\r\\n  .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] {\\r\\n    font-weight: bold;\\r\\n  }\\r\\n\\r\\n.form-control[_ngcontent-%COMP%] {\\r\\n  width: 100%;\\r\\n  padding: 8px;\\r\\n  font-size: 16px;\\r\\n  border: 1px solid #ccc;\\r\\n  border-radius: 4px;\\r\\n  transition: border-color 0.2s;\\r\\n}\\r\\n\\r\\n  .form-control[_ngcontent-%COMP%]:focus {\\r\\n    border-color: #3498db;\\r\\n    outline: none;\\r\\n  }\\r\\n\\r\\n.btn-primary[_ngcontent-%COMP%] {\\r\\n  background-color: #3498db;\\r\\n  color: #fff;\\r\\n  border: none;\\r\\n  border-radius: 4px;\\r\\n  padding: 10px 20px;\\r\\n  font-size: 18px;\\r\\n  cursor: pointer;\\r\\n}\\r\\n\\r\\n  .btn-primary[_ngcontent-%COMP%]:hover {\\r\\n    background-color: #2980b9;\\r\\n  }\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9kcmFnZ2FibGUtZWxlbWVudC9kcmFnZ2FibGUtZWxlbWVudC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsWUFBWTtFQUNaLGFBQWE7RUFDYixzQkFBc0I7RUFDdEIsWUFBWTtFQUNaLGtCQUFrQjtFQUNsQix5QkFBaUI7VUFBakIsaUJBQWlCO0VBQ2pCLFlBQVk7RUFDWiwrQkFBK0I7QUFDakM7O0FBRUE7RUFDRSxrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIseUJBQXlCO0VBQ3pCLGNBQWM7RUFDZCxhQUFhO0VBQ2IsZUFBZTs7RUFFZixrQkFBa0I7RUFDbEIsWUFBWTtFQUNaLFVBQVU7RUFDVix5QkFBeUI7RUFDekIsYUFBYTtFQUNiLHlCQUF5QjtFQUN6QixtQkFBbUI7RUFDbkIsdUNBQXVDO0VBQ3ZDLGFBQWE7RUFDYixzQkFBc0I7QUFDeEI7O0FBRUE7RUFDRSxnQkFBZ0I7QUFDbEI7Ozs7O0FBS0EsZ0RBQWdEO0FBQ2hEO0VBQ0Usa0JBQWtCO0VBQ2xCLFlBQVk7RUFDWixVQUFVO0VBQ1YseUJBQXlCO0VBQ3pCLGFBQWE7RUFDYix5QkFBeUI7RUFDekIsbUJBQW1CO0VBQ25CLHVDQUF1QztFQUN2QyxhQUFhO0VBQ2Isc0JBQXNCO0FBQ3hCOztFQUVFO0lBQ0Usb0JBQW9CO0lBQ3BCLGVBQWU7SUFDZixjQUFjO0lBQ2QsZUFBZTtJQUNmLG9CQUFvQjtFQUN0Qjs7RUFFQTtJQUNFLGtCQUFrQjtJQUNsQixlQUFlO0lBQ2YsY0FBYztJQUNkLG1CQUFtQjtFQUNyQjs7QUFFRjtFQUNFLG1CQUFtQjtBQUNyQjs7RUFFRTtJQUNFLGlCQUFpQjtFQUNuQjs7QUFFRjtFQUNFLFdBQVc7RUFDWCxZQUFZO0VBQ1osZUFBZTtFQUNmLHNCQUFzQjtFQUN0QixrQkFBa0I7RUFDbEIsNkJBQTZCO0FBQy9COztFQUVFO0lBQ0UscUJBQXFCO0lBQ3JCLGFBQWE7RUFDZjs7QUFFRjtFQUNFLHlCQUF5QjtFQUN6QixXQUFXO0VBQ1gsWUFBWTtFQUNaLGtCQUFrQjtFQUNsQixrQkFBa0I7RUFDbEIsZUFBZTtFQUNmLGVBQWU7QUFDakI7O0VBRUU7SUFDRSx5QkFBeUI7RUFDM0IiLCJzb3VyY2VzQ29udGVudCI6WyIuZHJhZ2dhYmxlLWVsZW1lbnQge1xyXG4gIHdpZHRoOiAxMDBweDtcclxuICBoZWlnaHQ6IDEwMHB4O1xyXG4gIGJhY2tncm91bmQtY29sb3I6IGdyYXk7XHJcbiAgY29sb3I6IHdoaXRlO1xyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICB1c2VyLXNlbGVjdDogbm9uZTtcclxuICBjdXJzb3I6IGdyYWI7XHJcbiAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDAuM3MgZWFzZTtcclxufVxyXG5cclxuLmRyYWdnYWJsZS1jb250YWluZXIge1xyXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxufVxyXG5cclxuLmRyYWdnYWJsZSB7XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICMzNDk4ZGI7XHJcbiAgY29sb3I6ICNmZmZmZmY7XHJcbiAgcGFkZGluZzogMTBweDtcclxuICBjdXJzb3I6IHBvaW50ZXI7XHJcblxyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICBjdXJzb3I6IGdyYWI7XHJcbiAgd2lkdGg6IDUwJTtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmZmZmO1xyXG4gIHBhZGRpbmc6IDIwcHg7XHJcbiAgYm9yZGVyOiAycHggc29saWQgIzM0OThkYjtcclxuICBib3JkZXItcmFkaXVzOiAxMHB4O1xyXG4gIGJveC1zaGFkb3c6IDAgMCAxMHB4IHJnYmEoMCwgMCwgMCwgMC4yKTtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbn1cclxuXHJcbi5kcmFnZ2luZyB7XHJcbiAgY3Vyc29yOiBncmFiYmluZztcclxufVxyXG5cclxuXHJcblxyXG5cclxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG4jZHJhZ2dhYmxlIHtcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgY3Vyc29yOiBncmFiO1xyXG4gIHdpZHRoOiA1MCU7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZmZmZjtcclxuICBwYWRkaW5nOiAyMHB4O1xyXG4gIGJvcmRlcjogMnB4IHNvbGlkICMzNDk4ZGI7XHJcbiAgYm9yZGVyLXJhZGl1czogMTBweDtcclxuICBib3gtc2hhZG93OiAwIDAgMTBweCByZ2JhKDAsIDAsIDAsIDAuMik7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG59XHJcblxyXG4gICNkcmFnZ2FibGUgLmNsb3NlIHtcclxuICAgIGFsaWduLXNlbGY6IGZsZXgtZW5kO1xyXG4gICAgZm9udC1zaXplOiAyNHB4O1xyXG4gICAgY29sb3I6ICMzNDk4ZGI7XHJcbiAgICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgICBtYXJnaW4tYm90dG9tOiAtMjBweDtcclxuICB9XHJcblxyXG4gICNkcmFnZ2FibGUgaDIge1xyXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gICAgZm9udC1zaXplOiAyNHB4O1xyXG4gICAgY29sb3I6ICMzNDk4ZGI7XHJcbiAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xyXG4gIH1cclxuXHJcbi5mb3JtLWdyb3VwIHtcclxuICBtYXJnaW4tYm90dG9tOiAyMHB4O1xyXG59XHJcblxyXG4gIC5mb3JtLWdyb3VwIGxhYmVsIHtcclxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gIH1cclxuXHJcbi5mb3JtLWNvbnRyb2wge1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIHBhZGRpbmc6IDhweDtcclxuICBmb250LXNpemU6IDE2cHg7XHJcbiAgYm9yZGVyOiAxcHggc29saWQgI2NjYztcclxuICBib3JkZXItcmFkaXVzOiA0cHg7XHJcbiAgdHJhbnNpdGlvbjogYm9yZGVyLWNvbG9yIDAuMnM7XHJcbn1cclxuXHJcbiAgLmZvcm0tY29udHJvbDpmb2N1cyB7XHJcbiAgICBib3JkZXItY29sb3I6ICMzNDk4ZGI7XHJcbiAgICBvdXRsaW5lOiBub25lO1xyXG4gIH1cclxuXHJcbi5idG4tcHJpbWFyeSB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogIzM0OThkYjtcclxuICBjb2xvcjogI2ZmZjtcclxuICBib3JkZXI6IG5vbmU7XHJcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xyXG4gIHBhZGRpbmc6IDEwcHggMjBweDtcclxuICBmb250LXNpemU6IDE4cHg7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG59XHJcblxyXG4gIC5idG4tcHJpbWFyeTpob3ZlciB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjk4MGI5O1xyXG4gIH1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["DraggableElementComponent","constructor","http","ngOnInit","getCoordinatesByName","onDrag","event","isDragging","draggedElement","style","top","clientX","left","clientY","onDragEnd","topValue","leftValue","topNumeric","parseInt","leftNumeric","coordinates","name","id","x","y","saveCoordinates","onDragStart","target","post","apiUrl","subscribe","response","console","log","error","elementName","get","element","elementTop","elementLeft","elementToPosition","document","getElementById","selectors","hostBindings","ctx","i0"],"sourceRoot":"","sources":["C:\\src\\dotnet\\DashboardApp\\ClientApp\\src\\app\\components\\draggable-element\\draggable-element.component.ts","C:\\src\\dotnet\\DashboardApp\\ClientApp\\src\\app\\components\\draggable-element\\draggable-element.component.html"],"sourcesContent":["import { Component, HostListener, OnInit } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { DraggableElement } from '../../models/draggable-element.model';\r\n\r\n@Component({\r\n  selector: 'app-draggable-element',\r\n  templateUrl: './draggable-element.component.html',\r\n  styleUrls: ['./draggable-element.component.css'],\r\n})\r\n\r\n\r\nexport class DraggableElementComponent implements OnInit {\r\n  private isDragging = false;\r\n  private draggedElement: HTMLElement | null = null;\r\n  private apiUrl = 'https://localhost:7164';\r\n  constructor(private http: HttpClient) { }\r\n\r\n  ngOnInit(): void {\r\n    this.getCoordinatesByName('element1');\r\n    this.getCoordinatesByName('element2');\r\n    this.getCoordinatesByName('element3');\r\n  }\r\n  @HostListener('document:mousemove', ['$event'])\r\n  onDrag(event: MouseEvent): void {\r\n    if (this.isDragging && this.draggedElement) {\r\n      this.draggedElement.style.top = event.clientX + 'px';\r\n      this.draggedElement.style.left = event.clientY + 'px';\r\n    }\r\n  }\r\n\r\n  @HostListener('document:mouseup', ['$event'])\r\n  onDragEnd(event: MouseEvent): void {\r\n    if (this.isDragging && this.draggedElement) {\r\n      this.isDragging = false;\r\n\r\n      // Ottieni le coordinate dell'elemento trascinato come stringhe\r\n      const topValue = this.draggedElement.style.top;\r\n      const leftValue = this.draggedElement.style.left;\r\n\r\n      // Rimuovi \"px\" dai valori e converti in numeri\r\n      const topNumeric = parseInt(topValue, 10);\r\n      const leftNumeric = parseInt(leftValue, 10);\r\n\r\n      const coordinates = {\r\n        name: this.draggedElement.id,\r\n        x: topNumeric,\r\n        y: leftNumeric,\r\n      };\r\n\r\n      // Invia le coordinate al backend tramite una chiamata API\r\n      this.saveCoordinates(coordinates);\r\n\r\n      this.draggedElement = null;\r\n    }\r\n  }\r\n\r\n\r\n  onDragStart(event: MouseEvent): void {\r\n    this.isDragging = true;\r\n    this.draggedElement = event.target as HTMLElement;\r\n  }\r\n\r\n  private saveCoordinates(coordinates: any): void {\r\n\r\n\r\n    this.http.post(`${this.apiUrl}/api/SaveCoordinate`, coordinates)\r\n      .subscribe(\r\n        (response) => {\r\n          console.log('Coordinate salvate:', coordinates);\r\n        },\r\n        (error) => {\r\n          console.error('Errore durante il salvataggio delle coordinate:', error);\r\n          // Puoi gestire l'errore qui, ad esempio, mostrare un messaggio all'utente o effettuare altre azioni\r\n        }\r\n      );\r\n  }\r\n\r\n  private getCoordinatesByName(elementName: string): void {\r\n    this.http.get<any>(`${this.apiUrl}/api/GetCoordinate?elementName=${elementName}`)\r\n      .subscribe((response: any) => {\r\n        const element: DraggableElement = response;\r\n\r\n        if (element) {\r\n          const name = element.name;\r\n          const elementTop = element.y; \r\n          const elementLeft = element.x; \r\n\r\n          console.log('Coordinate salvate:', name, 'top y' + elementTop, 'left x' + elementLeft);\r\n\r\n          const elementToPosition = document.getElementById(name) as HTMLElement;\r\n\r\n          if (elementToPosition) {\r\n            elementToPosition.style.top = `${elementTop}px`;\r\n            elementToPosition.style.left = `${elementLeft}px`;\r\n          }\r\n        }\r\n      });\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n\r\n}\r\n","<div class=\"draggable-container\">\r\n  <div class=\"draggable\"     #draggableElement\r\n id=\"element1\" (mousedown)=\"onDragStart($event)\" (mouseup)=\"onDragEnd($event)\">Elemento 1</div>\r\n  <div class=\"draggable\"     #draggableElement\r\n id=\"element2\" (mousedown)=\"onDragStart($event)\" (mouseup)=\"onDragEnd($event)\">Elemento 2</div>\r\n  <div class=\"draggable\"     #draggableElement\r\n id=\"element3\" (mousedown)=\"onDragStart($event)\" (mouseup)=\"onDragEnd($event)\">Elemento 3</div>\r\n</div>\r\n\r\n\r\n\r\n<!--<div class=\"draggable-container\" #draggableContainer>\r\n  <div class=\"draggable\" *ngFor=\"let element of elements\" [id]=\"element.id\" [style.top.px]=\"element.top\" [style.left.px]=\"element.left\" (mousedown)=\"onDragStart($event)\" (mouseup)=\"onDragEnd($event)\">{{ element.name }}</div>\r\n</div>-->\r\n\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}